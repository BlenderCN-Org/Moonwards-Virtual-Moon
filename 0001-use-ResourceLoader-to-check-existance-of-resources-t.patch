From 0d39e8920a67b2e22b5e30ae460e1fbc2e6d425a Mon Sep 17 00:00:00 2001
From: MolbOrg <MolbOrg@gmail.com>
Date: Fri, 12 Apr 2019 15:08:26 +0300
Subject: [PATCH] use ResourceLoader to check existance of resources, to remap
 files work correctly on export

---
 gamestate.gd | 3 +--
 1 file changed, 1 insertion(+), 2 deletions(-)

diff --git a/gamestate.gd b/gamestate.gd
index 1b831b0..1e6927f 100644
--- a/gamestate.gd
+++ b/gamestate.gd
@@ -620,8 +620,7 @@ func load_level(var resource):
 	if resource is String:
 		if options.scenes.has(resource):
 			resource = options.scenes[resource].path
-		var directory = Directory.new();
-		if not directory.file_exists(resource):
+		if not ResourceLoader.exists(resource):
 			emit_signal("loading_error", "File does not exist: " + resource)
 			return
 	elif resource is PackedScene:
-- 
2.20.1

